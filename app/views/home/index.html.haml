%div{"ng-controller" => "TasksController"}
  %header
    %div Yet Another Todo List
    #navigation
      %div{"ng-show" => "isAuthenticated()", "ng-click" => "logout()"} Logout

  #login-form-container{"ng-hide" => "isAuthenticated()"}
    %h2 How about some details?
    %form{"ng-submit" => "signup()"}
      %input{"type" => "text", "ng-model" => "email", "size" => 25, "placeholder" => "enter your email"}
      %input{"type" => "password", "ng-model" => "password", "size" => 25, "placeholder" => "enter the password"}
      %input{"type" => "password", "ng-model" => "passwordConfirmation", "size" => 25, "placeholder" => "repeat the password"}
      %br
      %input.btn-primary{"type" => "submit", "value" => "Sign up"}

  -##login-form-container{"ng-hide" => "isAuthenticated() || !signup"}
  -#  %h2 How about some details?
  -#  %form{"ng-submit" => "signup()"}
  -#    %input{"type" => "text", "ng-model" => "email", "size" => 25, "placeholder" => "enter your email"}
  -#    %input{"type" => "password", "ng-model" => "password", "size" => 25, "placeholder" => "enter the password"}
  -#    %input{"type" => "password", "ng-model" => "passwordConfirmation", "size" => 25, "placeholder" => "repeat the password"}
  -#    %br
  -#    %input.btn-primary{"type" => "submit", "value" => "Sign up"}
  -#    or
  -#    %a{href: "#", "ng-click" => "signup = false"} sign in
  -#
  -##login-form-container{"ng-hide" => "isAuthenticated() || signup"}
  -#  %h2 Who are you?
  -#  %form{"ng-submit" => "login()"}
  -#    %input{"type" => "text", "ng-model" => "email", "size" => 25, "placeholder" => "enter your email"}
  -#    %input{"type" => "password", "ng-model" => "password", "size" => 25, "placeholder" => "enter the password"}
  -#    %br
  -#    %input.btn-primary{"type" => "submit", "value" => "Let me in"}
  -#    or
  -#    %a{href: "#", "ng-click" => "signup = true"} sign up

  #new-task-form-container{"ng-show" => "isAuthenticated()"}
    %form{"ng-submit" => "addTask()"}
      %input{"type" => "text", "ng-model" => "newTaskDescription", "size" => 35, "placeholder" => "type the new task description"}
      %input.btn-primary{"type" => "submit", "value" => "Add"}

  #task-list-container{"ng-show" => "isAuthenticated()"}
    %ul
      %li{"ng-repeat" => "task in tasks", "ng-click" => "showTask(task)"}
        %h3{"ng-class" => "isActive(task)"}
          {{task.description}}
          %small [{{task.priority}}]

  #task-view-container{"ng-show" => "isAuthenticated() && selectedTask != null"}
    %span{"ng-hide" => "editing", "ng-click" => "editing = true"}
      %h2 {{selectedTask.description}}
      %div Priority {{selectedTask.priority}}
      %div Created {{selectedTask.createdAt | date: 'yyyy-MM-dd HH:mm:ss'}}
      %div Last updated {{selectedTask.updatedAt | date: 'yyyy-MM-dd HH:mm:ss'}}

    %form{"ng-show" => "editing", "ng-submit" => "updateTask(); editing = false"}
      %h3
        Description
        %input{"type" => "text", "ng-model" => "taskDescription", "size" => 35}
      %h3
        Priority
        %input{"type" => "number", "ng-model" => "taskPriority"}
      %div
        %input.btn-primary{"type" => "submit", "value" => "Save changes"}
        %input.btn-primary{"type" => "button", "value" => "Cancel editing", "ng-click" => "editing = false"}

    %br
    #delete-task-form-container{"ng-hide" => "editing"}
      %form{"ng-submit" => "deleteTask()"}
        %input.btn-primary{"type" => "submit", "value" => "Delete task"}
